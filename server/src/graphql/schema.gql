#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                     TYPE SECTION STARTS                   |
# |                                                           |
# \___________________________________________________________/


enum UserTypeEnum {
  USER
  ADMIN
}

enum ActionEnum {
  FOLDER
  PLAN
  ROUTE_ACTION
  CODE
  SEARCH
  REVIEW_GOAL_PROGRESS
}

enum MessageRoleEnum {
  USER
  SYSTEM
  ASSISTANT
  SWARMSTAR
}

type User {
  id: ID!
  type: UserTypeEnum
  swarms: [Swarm!]
  memories: [Memory!]
}

type Swarm {
  id: ID!
  title: String
  goal: String
  data: SwarmData
}

type SwarmData {
  id: ID!
  chats: [Chat!]
  actionNodes: [ActionNode!]
  memoryNodes: [MemoryNode!]
  actionMetadataNodes: [ActionMetadataNode!]
}

type Memory {
  id: ID!
  title: String
  memoryNodes: [MemoryNode!]
}

type Chat {
  id: ID!
  title: String
  data: ChatData
}

type ChatData {
  id: ID!
  messages: [Message!]
}

type ActionNode {
  id: ID!
  title: String
  parentId: ID
}

type MemoryNode {
  id: ID!
  title: String
  parentId: ID
}

type ActionMetadataNode {
  id: ID!
  title: String
  parentId: ID
  description: String
}

type Message {
  id: ID!
  content: String
  role: MessageRoleEnum
}

#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                     TYPE SECTION ENDS                     |
# |                                                           |
# \___________________________________________________________/

# ___________________________________________________________

#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                   QUERY SECTION STARTS                    |
# |                                                           |
# \___________________________________________________________/

type RootQuery {
  fetchSwarm(swarmId: ID!): Swarm
  fetchMemory(memoryId: ID!): Memory
  fetchChat(chatId: ID!): Chat
  fetchUser: User
  actionMetadata: ActionMetadataQuery
}

type ActionMetadataQuery {
  getActionMetadata: [ActionMetadataNode]
}

#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                     QUERY SECTION ENDS                    |
# |                                                           |
# \___________________________________________________________/

# ___________________________________________________________

#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                   MUTATION SECTION STARTS                 |
# |                                                           |
# \___________________________________________________________/

type RootMutation {
  swarmMutation: SwarmMutation
  memoryMutation: MemoryMutation
  chatMutation: ChatMutation
}

input CreateSwarmRequest {
  title: String!
  goal: String!
  memoryId: ID!
}

type SwarmMutation {
  createSwarm(input: CreateSwarmRequest!): User
}

input CreateMemoryRequest {
  title: String!
}

type MemoryMutation {
  createMemory(input: CreateMemoryRequest!): User
}

input SendMessageRequest {
  content: String!
  chatId: ID!
}

type ChatMutation {
  sendMessage(input: SendMessageRequest!): Chat
}

#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                   MUTATION SECTION ENDS                   |
# |                                                           |
# \___________________________________________________________/

# ___________________________________________________________

#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                   SUBSCRIPTION SECTION STARTS             |
# |                                                           |
# \___________________________________________________________/

type Subscription {
  messageSent(chatId: ID!): Message
}

#  ___________________________________________________________
# /                                                           \
# |                                                           |
# |                   SUBSCRIPTION SECTION ENDS               |
# |                                                           |
# \___________________________________________________________/

schema {
  query: RootQuery
  mutation: RootMutation
  subscription: Subscription
}
